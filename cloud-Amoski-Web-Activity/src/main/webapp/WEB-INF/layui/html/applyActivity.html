<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link rel="shortcut icon" href="//lib.eqh5.com/favicon.ico" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="2MKKT6mbuL"><meta name="viewport" id="viewport" content="width=320, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords" content="amosik活动报名">
    <meta name="description" content="amosik活动报名">
    <meta name="renderer" content="webkit"><meta name="robots" content="index, follow"><meta name="format-detection" content="telephone=no"><!-- no cache -->
    <meta http-equiv="cache-control" content="max-age=0"><meta http-equiv="cache-control" content="no-cache">
    <!--<link rel="stylesheet" href="../css/need/layer.css">-->
    <link rel="stylesheet" href="../css/view-27084b7.min.css">
</head>
<body>
<div class="p-index main" id="con" style="">
    <div class="nr" id="nr" style="position: relative; width: 100%; height: 100%;">
    <section class="main-page z-current" style="">
        <div class="m-img" id="page1" _tracker_view_="_tracker_view_">
            <div class="edit_wrapper" data-scene-id="1453061067" style="position: relative; z-index: 1">
                <div style="width: 100%; height: 100%; overflow: hidden; position: absolute;z-index: -1">
                    <div id="wrapper-background4124095198" class="eqx-bg eqx-bg-img" style="width: 100%; height: 100%; background-image: url('../images/bg.png');background-size: cover; background-position: 50% 50%;background-origin: content-box"></div>
                </div>
                <section class="layer" id="layer:4558447634" style="position: absolute; width: 100%; height: 100%; z-index: 1; display: block;">
                    <div class="layer-box">
                        <ul id="edit_area" class="layer-items edit_area weebly-content-area weebly-area-active" style="margin-top: 9px;">
                            <li id="inside_704024125" num="5" ctype="7" class="item item-comp" style="position: absolute; z-index: 5; opacity: 1; width: 320px; height: 58px; top: 26px; left: 0px; transform: rotateZ(0deg); display: block;" abs-pos="l-0-t-26-w-320-h-58" eqx-id="704024125">
                                <div class="element-box" style="width: 100%; height: 100%; top: 26px; left: 0px; writing-mode: horizontal-tb; text-align: center; line-height: 1.5; font-size: 32px; background-color: rgba(255, 255, 255, 0); font-weight: normal; font-style: normal; text-decoration: none; color: rgb(255, 255, 255); z-index: 5; transform: none; border-width: 0px; border-style: solid; border-color: rgb(0, 0, 0); border-radius: 0px; padding-bottom: 0px; padding-top: 0px; box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 0px; margin-top: 0px; margin-bottom: 0px; animation: 1s ease 0.2s 1 normal both running fadeIn;">
                                    <div class="element-box-contents" style="width: 100%; height: 100%">
                                        <div id="704024125" ctype="7" class="element" style="padding: 5px; width: 100%; height: 100%; font-size: 32px; writing-mode: horizontal-tb; cursor: default; min-height: inherit; letter-spacing: 0em;">
                                            <span style="display: block;margin-top: 0px;margin-bottom: 0px;color: inherit;-ms-word-wrap: break-word;word-wrap: break-word; -webkit-user-select: auto">诚挚邀请</span>
                                        </div>
                                    </div>
                                </div></li>
                            <li id="inside_1604553094" num="4" ctype="5" class="item item-comp wsite-input" style="position: absolute; z-index: 4; opacity: 1; width: 244px; height: 42px; top: 116px; left: 43px; transform: rotateZ(0deg); display: block;" abs-pos="l-43-t-116-w-244-h-42" eqx-id="1604553094">
                                <div class="element-box" style="width: 100%; height: 100%; border-radius: 0px; border-style: solid; z-index: 4; border-color: rgb(130, 130, 130); padding-top: 0px; box-shadow: rgb(51, 51, 51) 0px 0px 0px; border-width: 1px; left: 43px; padding-bottom: 0px; top: 116px; transform: none; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                                    <div class="element-box-contents" style="width: 100%; height: 100%">
                                        <textarea id="name" ctype="5" class="element comp_input editable-text" maxlength="300" name="eq[f_1604553094]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none" placeholder="姓名"></textarea>
                                    </div>
                                </div></li>
                            <li id="inside_1149527174" num="3" ctype="5" class="item item-comp wsite-input" style="position: absolute; z-index: 3; opacity: 1; width: 248px; height: 40px; top: 183px; left: 42px; transform: rotateZ(0deg); display: block;" abs-pos="l-42-t-183-w-248-h-40" eqx-id="1149527174">
                                <div class="element-box" style="width: 100%; height: 100%; border-radius: 0px; border-style: solid; z-index: 3; border-color: rgb(130, 130, 130); padding-top: 0px; box-shadow: rgb(51, 51, 51) 0px 0px 0px; border-width: 1px; left: 42px; padding-bottom: 0px; top: 183px; transform: none; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                                    <div class="element-box-contents" style="width: 100%; height: 100%">
                                        <textarea id="mobile" ctype="5" class="element comp_input editable-text" maxlength="300" name="eq[f_1149527174]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none" placeholder="手机"></textarea>
                                    </div>
                                </div></li>
                            <li id="inside_5212652063" num="2" ctype="5" class="item item-comp wsite-input" style="position: absolute; z-index: 2; opacity: 1; width: 246px; height: 41px; top: 248px; left: 45px; transform: rotateZ(0deg); display: block;" abs-pos="l-45-t-248-w-246-h-41" eqx-id="5212652063">
                                <div class="element-box" style="width: 100%; height: 100%; border-radius: 0px; border-style: solid; z-index: 2; border-color: rgb(130, 130, 130); padding-top: 0px; box-shadow: rgb(51, 51, 51) 0px 0px 0px; border-width: 1px; left: 45px; padding-bottom: 0px; top: 248px; line-height: 1; transform: none; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                                    <div class="element-box-contents" style="width: 100%; height: 100%">
                                        <textarea id="count" ctype="5" class="element comp_input editable-text" maxlength="300" name="eq[f_5212652063]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none" placeholder="人数"></textarea>
                                    </div>
                                </div></li>
                            <li id="inside_7641631095" num="1" ctype="6" class="item item-comp wsite-input" style="position: absolute; z-index: 1; opacity: 1; width: 240px; height: 39px; top: 380px; left: 45px; transform: rotateZ(0deg); display: block;" abs-pos="l-45-t-380-w-240-h-39" eqx-id="7641631095">
                                <div class="element-box" style="width: 100%; height: 100%; border-radius: 0px; transform: none; border-style: solid; z-index: 1; border-color: rgb(181, 98, 98); padding-top: 0px; background-color: rgb(222, 75, 75); box-shadow: rgb(51, 51, 51) 0px 0px 0px; color: rgb(255, 255, 255); border-width: 1px; left: 45px; padding-bottom: 0px; top: 380px; line-height: 1; text-align: left; margin-top: 0px; margin-bottom: 0px;">
                                    <div class="element-box-contents" style="width: 100%; height: 100%">
                                        <button style="display: block;width: 100%;height: 100%;" id="commitBtn" ctype="6" data-event="11201" class="element comp_button editable-text" _tracker_click_="_tracker_click_">提交</button>
                                    </div>
                                </div></li>
                        </ul>
                    </div>
                </section>
            </div>
        </div>
    </section>
</div>
</div>
</div>
<script type="text/javascript" src="../jquery.min.js"></script>
<script type="text/javascript" src="../layer.js"></script>
<script>
    //提交报名
    function commitInfo(){
        var name=$("#name").val();
        var mobile=$("#mobile").val();
        var count=$("#count").val();
        if(name==""||mobile==""||count==""){
            layer.open({
                content: '请填写完整信息!'
                ,btn: '知道了'
            });
            return;
        }
        if(!(/^1[34578]\d{9}$/.test(mobile))){
            layer.open({
                content: '手机号有误!'
                ,btn: '知道了'
            });
            return;
        }
        if(isNaN(count)){
            layer.open({
                content: '报名人数填写错误!'
                ,btn: '知道了'
            });
            return;
        }
        $("#commitBtn").attr("disabled",true);
        var url="/AmoskiWebActivity/userApply/userActivityApply";
        //加载层
        //loading层
        var loading=layer.open({type: 2});
        $.ajax({
            type: "POST",
            url: url,
            data: {name:name, mobile:mobile,count:count},
            dataType: "json",
            success: function(res){
                var data=res.data;
                if(res.code=="0"){
                    //信息框
                    window.location.href="signupSuccess.html";
                }else if(res.code=="10001"){
                    layer.open({
                        content: '请填写完整信息!'
                        ,btn: '知道了'
                    });
                }else if(res.code=="20000"){
                    layer.open({
                        content: '手机号有误!'
                        ,btn: '知道了'
                    });
                }else if(res.code=="30002"){
                    layer.open({
                        content: '手机号已报名!'
                        ,btn: '知道了'
                    });
                }else{
                    layer.open({
                        content: '报名失败!请稍后再试!'
                        ,btn: '知道了'
                    });
                }
            },complete : function(XHR, TR) {
                layer.close(loading);
                $("#commitBtn").attr("disabled",false);
                if (TR == 'timeout') {// 超时
                    showJudegTip('fail','Time out,please refresh.');
                } else if (XHR.status == '500' || TR == 'error') {// 异常
                    //showJudegTip('fail','Server error.');
                    console.log("Server error.");
                }
            }

        });
    }
    $(function(){
        $("#commitBtn").click(function(){//提交
            commitInfo();
        })
    })
</script>
</body>
</html>